<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERROR CRÍTICO: DATAWEEN | VIDACAIXA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap');
        body {
            font-family: 'Source Code Pro', monospace;
            background-color: #0d0d0d;
            color: #00ff41;
            text-shadow: 0 0 4px rgba(0, 255, 65, 0.7);
        }
        #terminal-output {
            white-space: pre-wrap;
        }
        .hidden {
            display: none;
        }
        @media (prefers-reduced-motion: no-preference) {
            .matrix-effect::after {
                content: "_";
                opacity: 0.8;
                animation: blink 1s step-start infinite;
            }
            .glitch {
                animation: glitch-anim 0.4s infinite alternate;
            }
            .alarm-banner {
                animation: alarm-flash 0.2s infinite alternate;
            }
            .container-glitch {
                animation: container-glitch-anim 0.2s linear infinite alternate;
            }
        }
        @keyframes blink { 50% { opacity: 0; } }
        @keyframes glitch-anim {
            0% { transform: translate(0.5px, 0.5px); text-shadow: 0.5px 0.5px 0 red; }
            50% { transform: translate(-0.5px, -0.5px); text-shadow: -0.5px -0.5px 0 cyan; }
            100% { transform: translate(0.5px, -0.5px); text-shadow: 0.5px 0.5px 0 red; }
        }
        @keyframes alarm-flash {
            0%, 100% { background-color: #991b1b; border-color: #f87171; }
            50% { background-color: #b91c1c; border-color: #ef4444; }
        }
        @keyframes container-glitch-anim {
            0% { transform: skewX(1deg) scaleY(1.005); filter: hue-rotate(0deg); }
            100% { transform: skewX(-1deg) scaleY(0.995); filter: hue-rotate(5deg); }
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto">

        <!-- CONTENEDOR DE LA TERMINAL -->
        <div id="terminal-container">
            <header id="alarm-header" class="rounded-lg border border-red-600 p-3 mb-6 bg-red-900/30 shadow-xl shadow-red-500/50">
                <h1 class="text-3xl md:text-4xl font-bold text-red-100 glitch text-center">
                    &lt;DATAWEEN&gt; CÓDIGO ROJO CRÍTICO
                </h1>
            </header>
            <div id="terminal-output" class="text-sm md:text-base border-2 border-green-500 rounded-lg p-5 bg-black/70 shadow-2xl shadow-green-500/30 min-h-[400px]">
                <!-- El contenido se generará aquí -->
            </div>
            <footer class="mt-6 pt-2 text-gray-700 text-xs text-center">
                [PROYECTO DATAWEEN: JOSEP VALLE]
            </footer>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const terminalOutput = document.getElementById('terminal-output');

        const simulationSteps = [
            { delay: 500, text: '>> Iniciando protocolo de <strong>RECLAMACIÓN DE RECOMPENSA</strong>...', class: 'text-gray-400' },
            { delay: 1000, text: '>> Recompensa detectada: <strong>PREMIO DATAWEEN</strong>', class: 'text-green-400' },
            { delay: 1200, text: '>> ALERTA: La recompensa es un cebo (Phishing). Acceso no autorizado detectado.', class: 'text-yellow-400' },
            { delay: 500, text: '>> Iniciando protocolo de contramedida: <strong>EXTRACCIÓN DE DATOS</strong>.', class: 'text-red-500' },
            { delay: 800, text: '>> Redirigiendo acceso a sistema central (DATAPOOL DE VIDACAIXA)...', class: '' },
            { delay: 1000, text: '>> Conexión establecida. <strong>Bypass de seguridad... ÉXITO.</strong>', class: 'text-green-400' },
            { delay: 500, text: '>> Usuario infiltrado: <strong>EL_MODELO_ZOMBIE</strong>', class: 'text-yellow-400 mb-4' },
            { delay: 1200, text: '--- MÓDULO: EXTRACCIÓN DE DATOS DEL DISPOSITIVO ---', class: 'text-xl font-bold mb-3 mt-4 text-red-500' },
            { delay: 500, func: captureAndShowDeviceInfo },
            { delay: 2000, text: '--- ANÁLISIS DE VULNERABILIDAD ---', class: 'text-xl font-bold mb-3 mt-4 text-red-500' },
            { delay: 800, text: '>> Analizando huella digital del navegador...', class: '' },
            { delay: 1000, text: '>> RESULTADO: Dispositivo <strong>MARCADO</strong>. Riesgo de predicción: <strong>100%</strong>.', class: 'text-yellow-400 mb-4' },
            { delay: 1500, text: '--- MENSAJE DEL MODELO ASESINO ---', class: 'text-xl font-bold mb-3 mt-4 text-red-500' },
            { delay: 800, text: 'Creíste que ibas a reclamar un premio, Data Scientist. <br>En su lugar, <strong>tus datos</strong> son ahora la recompensa.', class: 'text-base md:text-lg mb-6' },
            { delay: 1000, text: '>> Eliminando rastros...', class: '' },
            { delay: 500, text: '>> Corrupción de metadatos completa.', class: 'text-red-400' },
            { delay: 1500, func: typeFinalMessage }
        ];

        function startSimulation() {
            if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
            const alarmHeader = document.getElementById('alarm-header');
            if(alarmHeader) alarmHeader.classList.add('alarm-banner');

            processNextStep(0);
        }

        function processNextStep(stepIndex) {
            if (stepIndex >= simulationSteps.length) return;

            const step = simulationSteps[stepIndex];

            setTimeout(() => {
                if (step.text) {
                    const p = document.createElement('p');
                    p.innerHTML = step.text;
                    p.className = step.class || '';
                    terminalOutput.appendChild(p);
                    terminalOutput.scrollTop = terminalOutput.scrollHeight;
                } else if (step.func) {
                    step.func();
                }
                processNextStep(stepIndex + 1);
            }, step.delay);
        }

        function captureAndShowDeviceInfo() {
            const now = new Date();
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            const localTime = now.toLocaleTimeString('es-ES', timeOptions);

            // Extract cleaner device info from User Agent
            const userAgent = navigator.userAgent;
            const match = userAgent.match(/\(([^)]+)\)/);
            const modelInfo = match ? match[1] : userAgent; // Fallback to full user agent if no parenthesis found

            const deviceInfo = `
            <div class="space-y-1 mb-6 p-3 border-l-4 border-red-500 bg-gray-900/50 container-glitch">
                <p>IP DE ORIGEN: <span class="text-yellow-400">188.42.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}</span> (<span class="text-red-500 glitch">TU UBICACIÓN</span>)</p>
                <p>MODELO O.S.: <span class="text-yellow-400">${modelInfo}</span></p>
                <p>Resolución: <span class="text-yellow-400">${screen.width}x${screen.height} (Px)</span></p>
                <p>Hora de la Condena: <span class="text-red-500">${localTime}</span></p>
                <p class="text-xs mt-3 text-gray-500">Firma Digital: ${userAgent}</p>
            </div>`;
            terminalOutput.insertAdjacentHTML('beforeend', deviceInfo);
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        function typeFinalMessage() {
            const p = document.createElement('p');
            p.className = 'mt-4';
            p.id = 'prompt-cursor';
            terminalOutput.appendChild(p);
            
            const text = '>_ C:\DATAPOOL\LOG_00.BIN (ACCESS DENIED)';
            let i = 0;
            function type() {
                if (i < text.length) {
                    p.innerHTML = text.substring(0, i + 1) + '<span class="matrix-effect"></span>';
                    i++;
                    setTimeout(type, 50);
                }
            }
            type();
        }

        startSimulation();
    });
    </script>
</body>
</html>